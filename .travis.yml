sudo: required
language: python
python:
  - '3.6'
services:
  - docker
before_install:
  - docker-compose up --build -d
before_script:
  # - cd DrogariaIdeal
script:
  - docker-compose run web python manage.py
after_script:
  - docker-compose down
  # - docker-compose run web py.test --cov=apps
  # - docker-compose run web flake8 --exclude test_settings.py,*/migrations/,manage.py .
deploy:
  provider: heroku
  api_key: #unsucure
    secure: "0a46f65a-5b91-400c-af15-16d8f137bdc0"
  app:
    devel: drograria-devel
    deploy_continous: drograria-deploy_continous
  run:
    - "python manage.py makemigrations"
    - "python manage.py migrate"
